@using TierheimDhiliUndJustus.BLL;
@using TierheimDhiliUndJustus.DAL;
@using MySqlConnector;
@using System.Drawing;
@using System.Data.SqlClient;
@using System.IO;

@code{

    //wenn eine Checkbox im Filter angeklickt wird, ruft es diese Methode aus, welche die lst_checkbox von der Tierart/Tierrasse
    //verändert. 
    //In der Liste sind die angeklickten Felder reingespeichert.
    public void ChangeCheckedStatus(List<int> lst_checkbox, int tierid, object checkedValue)
    {
        if ((bool)checkedValue == true)
        {
            if (!lst_checkbox.Contains(tierid))
            {
                lst_checkbox.Add(tierid);
            }
        }
        else
        {
            if (lst_checkbox.Contains(tierid))
            {
                lst_checkbox.Remove(tierid);
            }
        }
    }

    //Diese Methode wird noch überarbeitet, der Filter funktioniert also noch nicht so wie im Prototypen
    public List<Tier> GetTheRightTierList(List<int> lstcheckbox_tierrassen, List<int> lstcheckbox_tierart, bool fundtiere)
    {
        if(lstcheckbox_tierrassen.Count > 0 || lstcheckbox_tierart.Count > 0)
        {
            return fundtiere ? Tier_DA.GetFundtierWithFilterTierrasse(lstcheckbox_tierrassen, lstcheckbox_tierart) : Tier_DA.GetTierWithFilterTierrasse(lstcheckbox_tierrassen, lstcheckbox_tierart);
        }
        else
        {
            return fundtiere ? Tier_DA.GetFundtiere() : Tier_DA.GetTier();
        }
    }

    public string GetGeschlecht(int tierid)
    {
        Tier tier = Tier_DA.GetOneTier(tierid);
           
        if (tier.Geschlecht == "w")
        {
            return "img/weiblich.png";
        }
        else
        {
            return "img/männlich.png";
        }             
    }

    public string GetGeschlechtAsText(Tier CurrentTier)
    { 
        if (CurrentTier.Geschlecht == "w")
        {
            return "weiblich";
        }
        else
        {
            return "männlich";
        }             
    }

    public bool IsTierHund(Tier CurrentTier)
    {
        if (Tierrasse_DA.GetTierartWithTierID(CurrentTier.ID_Tier) == 2)
        {
            return true;
        }
        else
        {
            return false;
        }
    }
    
    public bool IsUserAngemeldet()
    {
        if (LoginConfig.Angemeldet == 0)
        {
            return false;
        }
        else
        {
            return true;
        }
    }
}
